<nav class="navbar-container">
  <div class="navbar-content">
    <!-- Logo -->
    <div class="navbar-logo hover:cursor-pointer hover:bg-gray-50/10 p-1 rounded-sm" [routerLink]="'/home'">
      <img src="images/logo.png" alt="MoneyManager" class="logo-image" />
      <span class="logo-text">MoneyManager</span>
    </div>

    <!-- Desktop Navigation -->
    <!-- Quest Navigation (Guest users) -->
    <div class="navbar-quest desktop-nav" *ngIf="!isLoggedIn">
      <ul class="nav-list">
        <li *ngFor="let item of questNavItems" class="nav-item">
          <a [routerLink]="item.link" class="nav-link">
            <img [src]="item.icon" alt="Icon" class="nav-icon w-5 h-5">
            <span class="nav-text">{{ item.text }}</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- User Navigation (Logged in users) -->
    <div class="navbar-user desktop-nav" *ngIf="isLoggedIn">
      <ul class="nav-list">
        <li *ngFor="let item of userNavItems" class="nav-item">
          <a [routerLink]="item.link" class="nav-link " *ngIf="item.action !== 'logout'">
            <img [src]="item.icon" alt="Icon" class="nav-icon w-5 h-5 ">
            <span class="nav-text">{{ item.text }}</span>
          </a>
          <a 
            (click)="logout()" 
            class="nav-link " 
            *ngIf="item.action === 'logout'"
          >
            <img [src]="item.icon" alt="Icon" class="nav-icon w-5 h-5">
            <span class="nav-text">{{ item.text }}</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Desktop Dark mode toggle -->
    <div class="navbar-theme-toggle desktop-nav">
      <button 
        (click)="toggleDarkMode()" 
        class="theme-toggle-btn"
        [attr.aria-label]="isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'"
      >
        <img [src]="isDarkMode ? 'https://cdn-icons-png.freepik.com/512/16066/16066460.png?ga=GA1.1.1194572750.1761656981' : 'https://cdn-icons-png.freepik.com/512/6853/6853935.png?ga=GA1.1.1194572750.1761656981'" class="theme-icon">
      </button> 
    </div>

    <!-- Hamburger Menu Button -->
    <button 
      class="hamburger-btn mobile-nav"
      [class.open]="isMenuOpen"
      (click)="toggleMenu()"
      [attr.aria-label]="isMenuOpen ? 'Close menu' : 'Open menu'"
      [attr.aria-expanded]="isMenuOpen"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" [class.open]="isMenuOpen" (click)="closeMenu()">
    <div class="mobile-menu" [class.open]="isMenuOpen" (click)="$event.stopPropagation()">
      <!-- Mobile Quest Navigation -->
      <div class="mobile-nav-section" *ngIf="!isLoggedIn">
        <ul class="mobile-nav-list">
          <li *ngFor="let item of questNavItems" class="mobile-nav-item">
            <a [routerLink]="item.link" class="mobile-nav-link" (click)="closeMenu()">
              <img [src]="item.icon" alt="Icon" class="mobile-nav-icon-img">
              <span class="mobile-nav-text text-primary-secondary">{{ item.text }}</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Mobile User Navigation -->
      <div class="mobile-nav-section" *ngIf="isLoggedIn">
        <ul class="mobile-nav-list">
          <li *ngFor="let item of userNavItems" class="mobile-nav-item">
            <a 
              [routerLink]="item.link" 
              class="mobile-nav-link" 
              *ngIf="item.action !== 'logout'"
              (click)="closeMenu()"
            >
              <img [src]="item.icon" alt="Icon" class="mobile-nav-icon-img">
              <span class="mobile-nav-text text-primary">{{ item.text }}</span>
            </a>
            <button 
              (click)="logout(); closeMenu()" 
              class="mobile-nav-link mobile-nav-button" 
              *ngIf="item.action === 'logout'"
            >
              <img [src]="item.icon" alt="Icon" class="mobile-nav-icon-img">
              <span class="mobile-nav-text text-primary">{{ item.text }}</span>
            </button>
          </li>
        </ul>
      </div>

      <!-- Mobile Dark mode toggle -->
      <div class="mobile-theme-toggle">
        <button 
          (click)="toggleDarkMode()" 
          class="mobile-theme-toggle-btn"
          [attr.aria-label]="isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'"
        >
          <img [src]="isDarkMode ? 'https://cdn-icons-png.freepik.com/512/16066/16066460.png?ga=GA1.1.1194572750.1761656981' : 'https://cdn-icons-png.freepik.com/512/6853/6853935.png?ga=GA1.1.1194572750.1761656981'" class="mobile-theme-icon-img" alt="Theme">
          <span class="mobile-theme-text text-primary">{{ isDarkMode ? 'Világos mód' : 'Sötét mód' }}</span>
        </button>
      </div>
    </div>
  </div>
</nav>