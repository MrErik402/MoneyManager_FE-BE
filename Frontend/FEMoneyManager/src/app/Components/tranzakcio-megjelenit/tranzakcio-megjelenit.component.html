<app-tranzakcio-felvetel></app-tranzakcio-felvetel>
<div class="w-full max-w-6xl mx-auto px-3 pb-6">
  <div class="border-2 border-gray-500/50 rounded-lg shadow-lg p-6">
    <div class="mb-6">
      <h2 class="h4-text mb-1">Tranzakci√≥k megjelen√≠t√©se</h2>
    </div>

    <div class="mb-4 space-y-3">
      <div class="flex flex-col sm:flex-row gap-3">
        <div class="flex gap-2">
          <select class="form-input-ugly w-auto mini-text">
            <option value="">Kateg√≥ria</option>
            <option value="income">Bev√©tel</option>
            <option value="expense">Kiad√°s</option>
          </select>
          <select class="form-input-ugly w-auto mini-text">
            <option value="">P√©nzt√°rca</option>
            <option value="1">P√©nzt√°rca 1</option>
            <option value="2">P√©nzt√°rca 2</option>
          </select>
        </div>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b border-gray-200">
            <th class="text-left py-3 px-2 mini-text-no-center uppercase">
              P√©nzt√°rca
            </th>
            <th class="text-left py-3 px-2 mini-text-no-center uppercase">
              Kateg√≥ria
            </th>
            <th class="text-left py-3 px-2 mini-text-no-center uppercase">
              T√≠pus
            </th>
            <th class="text-right py-3 px-2 mini-text-no-center uppercase">
              √ñsszeg
            </th>
            <th class="text-center py-3 px-2 mini-text-no-center uppercase">
              M≈±veletek
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 bg-slate-100/20 m-2">
          <tr *ngIf="loading">
            <td colspan="5" class="py-6 text-center mini-text">Bet√∂lt√©s...</td>
          </tr>
          <tr *ngIf="!loading && error">
            <td colspan="5" class="py-6 text-center text-red-600 mini-text">{{ error }}</td>
          </tr>
          <tr *ngIf="!loading && !error && transactions.length === 0">
            <td colspan="5" class="py-6 text-center mini-text">Nincsenek tranzakci√≥k</td>
          </tr>
          <tr *ngFor="let transaction of transactions" class="transition-colors duration-150">
            <td class="py-3 px-2 mini-text">{{ getWalletName(transaction.walletID) }}</td>
            <td class="py-3 px-2 mini-text">{{ getCategoryName(transaction.categoryID) }}</td>
            <td class="py-3 px-2 mini-text">
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                [ngClass]="transaction.type === 'bev√©tel' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
              >
                {{ transaction.type === 'bev√©tel' ? 'Bev√©tel' : 'Kiad√°s' }}
              </span>
            </td>
            <td
              class="py-3 px-2 text-sm text-right font-semibold mini-text"
              [ngClass]="transaction.type === 'bev√©tel' ? 'text-green-600' : 'text-red-600'"
            >
              {{ transaction.type === 'bev√©tel' ? '+' : '-' }}{{ transaction.amount | number : '1.0-0' }} Ft
            </td>
            <td class="py-3 px-2 text-center">
              <div class="flex justify-center space-x-1">
                <button class="action-button-ugly" (click)="editTransaction(transaction)" title="Szerkeszt√©s">
                  <span class="text-2xl">‚úèÔ∏è</span>
                </button>
                <button class="action-button-ugly text-red-600" (click)="deleteTransaction(transaction)" title="T√∂rl√©s">
                  <span class="text-2xl">üóëÔ∏è</span>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="mt-8 flex items-center justify-between">
      <div class="text-sm text-gray-700">{{ transactions.length }} tranzakci√≥</div>
      <button class="form-button-ugly" type="button" (click)="getTransactions()">Friss√≠t√©s</button>
    </div>
  </div>
</div>
